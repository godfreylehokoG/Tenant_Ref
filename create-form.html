<!DOCTYPE html>
<html>
<head>
    <title>Create a Form</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="formBuilder">
        <h1>Create a Form</h1>
        <button id="addTextQuestion">Add Text Question</button>
        <button id="addMultipleChoiceQuestion">Add Multiple-Choice Question</button>
        <div id="questionsContainer">
            <!-- Questions will be added here -->
        </div>
        <form id="questionForm" action="preview-form.html" method="get">
            <button type="submit" id="submitForm">Preview Form</button>
        </form>
    </div>

    <script>
        // JavaScript logic for the form builder
        const questionsContainer = document.getElementById('questionsContainer');
        const addTextQuestionButton = document.getElementById('addTextQuestion');
        const addMultipleChoiceQuestionButton = document.getElementById('addMultipleChoiceQuestion');
        const submitFormButton = document.getElementById('submitForm');

        let questionCount = 0;

        function addQuestion(type) {
            questionCount++;

            const questionDiv = document.createElement('div');
            questionDiv.classList.add('question');
            questionDiv.innerHTML = `
                <label for="question${questionCount}">Question ${questionCount}:</label>
                <input type="text" id="question${questionCount}" placeholder="Enter your question">
            `;

            if (type === 'multiple-choice') {
                questionDiv.innerHTML += `
                    <input type="radio" name="answer${questionCount}" value="option1" id="option1${questionCount}">
                    <label for="option1${questionCount}">Yes</label>
                    <input type="radio" name="answer${questionCount}" value="option2" id="option2${questionCount}">
                    <label for="option2${questionCount}">No</label>
                `;
            }

            const removeButton = document.createElement('button');
            removeButton.textContent = 'Remove Question';
            removeButton.addEventListener('click', () => {
                questionsContainer.removeChild(questionDiv);
            });

            questionDiv.appendChild(removeButton);
            questionsContainer.appendChild(questionDiv);
        }

        addTextQuestionButton.addEventListener('click', () => {
            addQuestion('text');
        });

        addMultipleChoiceQuestionButton.addEventListener('click', () => {
            addQuestion('multiple-choice');
        });

        submitFormButton.addEventListener('click', () => {
            // Display the preview of the form by copying the questions to the form renderer
            const clonedQuestions = questionsContainer.cloneNode(true);
            previewForm.innerHTML = '';
            previewForm.appendChild(clonedQuestions);
        });

       const questionForm = document.getElementById('questionForm');
    questionForm.addEventListener('submit', (event) => {
        event.preventDefault(); // Prevent the form from submitting normally

        // Serialize the questions and question types and add them as URL parameters
        const questionDivs = document.querySelectorAll('.question');
        const questions = [];
        const questionTypes = [];
        questionDivs.forEach((div) => {
            const questionText = div.querySelector('input[type="text"]').value;
            const questionType = div.querySelector('input[type="radio"]:checked') ? 'multi' : 'short_txt';
            questionTypes.push(questionType); // Store question type
            const questionOptions = [];
            if (questionType === 'multi') {
                questionOptions.push('Yes', 'No'); // Add your options here
            }
            questions.push({ text: questionText, type: questionType, options: questionOptions });
        });

        const questionsData = encodeURIComponent(JSON.stringify(questions));
        const questionTypesData = encodeURIComponent(JSON.stringify(questionTypes));

        // Set the hidden input value for question types
        const questionTypesInput = document.getElementById('questionTypes');
        questionTypesInput.value = questionTypesData;

        // Redirect to the preview page with the questions data and question types as URL parameters
        window.location.href = `preview-form.html?questions=${questionsData}`;
    });
    </script>
</body>
</html>
